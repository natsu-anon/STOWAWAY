* TODO TEST
  - [X] TWO dummy accounts
  - [X] test.js
	- [X] MAKE IT WORK [4/4]
	  - [X] implement new protocols
		- [X] KEY_UPDATE
		- [X] HISTORY_INQUIRY
		- [X] PROVENANCE
	  - [X] clean up handshake
		- [X] remove the key update section
		- [X] remove the revocation section???
	  - [X] remove all the unnnecessary bits that are in the new protocls from the old ones
	  - [X] make fetchOlder/fetchNewer/loadChannel handle messages in chronological order
		- NO!
	- [X] test new protocols (when able)
  - [-] deadhead.js - yo, the CLI is major dicked [2/4]
	- [X] ok provenance is fully working
	- [X] add '--overwrite' command line flag
	- [ ] make sure all the ctrl-menu navigation works properly
	- [ ] make database use the actually serialized one
	
* DONE aaaaaaaa openpgp changed stuff

* DONE update version number to 1.1.0

* DONE collect a buncha odds & ends into a utilities thing (maybe even set-up a blessed-utils thing also)
  - [X] rewrite [6/6]
	- [X] stowaway
	  - [X] Stowaway.numberStowaways() no longer returns a promise! (update appropriately) WHERESTVE IS IT USED???
		- not used yet :P
	  - [X] make _handleActive() & _handleCache() (formerly _handleNotify) return promises
	  - [X] see new constructor -- apply appropriately
	  - [X] revokeKey()
	- [X] key.js
	- [X] main
	- [X] index
	- [X] client
	- [X] everything else -- whatstve exactly?
  - [X] stowaway refactoring
	- [X] _handleActive()
	- [X] _handleNotify() now _handleCache()
	- [X] cache successfully processed messages
  - [X] NATO phrase
  - [X] all the read/write file stuff

* DONE swap out nedb with lokijs for RAISINS https://github.com/techfort/LokiJS [3/3]
- [X] replace in database.js
- [X] TEST [3/3]
  - [X] collections [6/6]
	- [X] basic queries
	- [X] fancier queries see https://github.com/techfort/LokiJS/wiki/Query-Examples
	  - [X] $exists
	  - [X] $or
	- [X] chaining -- just remember to .data() at the end
	- [X] updating -- just do what you want on the variable then do collection.update(variable), use delete to delete a property from an object
	  - [X] $set -- DOES NOT EXIST
	  - [X] $unset -- DOES NOT EXIST
	  - [X] $push -- DOES NOT EXIST
	- [X] removing
	- [X] autoupdate callbacks?  Don't bother
  - [X] dynamic views vs collections
  - [X] serializing
	- it works, but you MUST use the method as used in database.init()
- [X] fully integrate [100%]
  - [X] double check stowaway -- it's VITAL
  - [X] last_channel now a bool property of channel entries!  Change accordingly!
  - [X] stowaway [5/5]
	- [X] cache the _handleNotify stuff
	- [X] replace all 'this.db' with appropriate collection operations
	  - [X] revokeKey()
	  - [X] everywhere else
	- [X] rewrite db query functions
	  - [X] _allChannels
	  - [X] _allUsers -- renamed to _allPeers
	  - [X] _findChannel
	  - [X] _findUser -- renamed to _findPeer
	- [X] rewrite usage of db query functions
	  - [X] _allChannels
	  - [X] _allPeers
	  - [X] _findChannel
	  - [X] _findPeer
	- [X] see TODO in launch() -- get this.oldKeys from revocations
  - [X] wherever else nedb was used (models maybe?)
	- [X] channel model
	- [X] handshake model
	- [X] member factory -- maybe???
	- [X] update the main stuff
  - [X] command line stuff
	- lmao didn't need to

#+date: 2021-05-03

* DONE fix the bug(s) [4/4]
- [X] was it just 'this.date.toLocaleTimesString'?
- [X] was it in Stowaway._updatePrivateKey() also?
- [X] update version.json
- [X] cache message ids of shit you re-handshaked to -- don't repeat yourself

* TODO tidy up the repo [0/2]
- [ ] delete all extraneous files
- [-] update README.md [2/4]
  - [-] new pictures! [2/3]
	- [ ] intro pics
	- [X] create a bot pics
	- [X] usage pics
  - [X] console commands
  - [X] future development
  - [ ] running from source requirements
